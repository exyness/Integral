@import "tailwindcss";

@plugin "tailwindcss-animate";
@plugin "@tailwindcss/typography";

@custom-variant dark (&:is(.dark *));

@utility container {
  margin-inline: auto;
  padding-inline: 2rem;
  @media (width >= --theme(--breakpoint-sm)) {
    max-width: none;
  }
  @media (width >= 1400px) {
    max-width: 1400px;
  }
}

@theme {
  --font-sans: Outfit, sans-serif;

  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));

  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));

  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));

  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));

  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));

  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));

  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));

  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));

  --color-sidebar: hsl(var(--sidebar-background));
  --color-sidebar-foreground: hsl(var(--sidebar-foreground));
  --color-sidebar-primary: hsl(var(--sidebar-primary));
  --color-sidebar-primary-foreground: hsl(var(--sidebar-primary-foreground));
  --color-sidebar-accent: hsl(var(--sidebar-accent));
  --color-sidebar-accent-foreground: hsl(var(--sidebar-accent-foreground));
  --color-sidebar-border: hsl(var(--sidebar-border));
  --color-sidebar-ring: hsl(var(--sidebar-ring));

  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);

  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;
  --animate-fade-in: fade-in 0.3s ease-out;
  --animate-scale-in: scale-in 0.2s ease-out;

  --backdrop-blur-xs: 2px;

  @keyframes accordion-down {
    from {
      height: 0;
    }
    to {
      height: var(--radix-accordion-content-height);
    }
  }
  @keyframes accordion-up {
    from {
      height: var(--radix-accordion-content-height);
    }
    to {
      height: 0;
    }
  }
  @keyframes fade-in {
    0% {
      opacity: 0;
      transform: translateY(10px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }
  @keyframes scale-in {
    0% {
      transform: scale(0.95);
      opacity: 0;
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }
}

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }
}

@utility dark {
  /* Dark theme toaster */
  & [data-sonner-toaster] {
    --normal-bg: rgba(20, 20, 25, 0.7);
    --normal-border: #9333ea;
    --normal-text: #ffffff;
  }

  /* Dark theme toast styling */
  & [data-sonner-toast] {
    background: rgba(20, 20, 25, 0.7) !important;
    border: 1px solid #9333ea !important;
    color: #ffffff !important;
    box-shadow:
      0 20px 25px -5px rgba(0, 0, 0, 0.3),
      0 10px 10px -5px rgba(0, 0, 0, 0.2);
  }

  /* Dark theme text styling */
  & [data-sonner-toast] [data-title] {
    font-weight: 600;
    font-size: 14px;
    line-height: 1.4;
    color: #ffffff !important;
  }

  & [data-sonner-toast] [data-description] {
    font-size: 13px;
    line-height: 1.4;
    color: #b4b4b8 !important;
    margin-top: 4px;
  }

  /* Dark theme buttons */
  & [data-sonner-toast] [data-cancel-button] {
    background: rgba(255, 255, 255, 0.05) !important;
    border: 1px solid rgba(255, 255, 255, 0.15) !important;
    color: #b4b4b8 !important;
  }

  & [data-sonner-toast] [data-cancel-button]:hover {
    background: rgba(255, 255, 255, 0.1) !important;
    color: #ffffff !important;
  }
}
@utility scrollbar-thin {
  /* Hide scrollbar utility class */
  -ms-overflow-style: none; /* Internet Explorer 10+ */
  scrollbar-width: thin; /* Firefox */
}
@utility scrollbar-hide {
  &::-webkit-scrollbar {
    display: none;
  }
  -ms-overflow-style: none;
  scrollbar-width: none;
}

@layer base {
  :root {
    --expo-out: cubic-bezier(0.16, 1, 0.3, 1);
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;

    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;

    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;

    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;

    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;

    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;

    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;

    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 262.1 83.3% 57.8%;

    --radius: 0.5rem;

    --sidebar-background: 0 0% 98%;

    --sidebar-foreground: 240 5.3% 26.1%;

    --sidebar-primary: 240 5.9% 10%;

    --sidebar-primary-foreground: 0 0% 98%;

    --sidebar-accent: 240 4.8% 95.9%;

    --sidebar-accent-foreground: 240 5.9% 10%;

    --sidebar-border: 220 13% 91%;

    --sidebar-ring: 217.2 91.2% 59.8%;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;

    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;

    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;

    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;

    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;

    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;

    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;

    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 262.1 83.3% 57.8%;
    --sidebar-background: 240 5.9% 10%;
    --sidebar-foreground: 240 4.8% 95.9%;
    --sidebar-primary: 224.3 76.3% 48%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 240 3.7% 15.9%;
    --sidebar-accent-foreground: 240 4.8% 95.9%;
    --sidebar-border: 240 3.7% 15.9%;
    --sidebar-ring: 217.2 91.2% 59.8%;
  }

  ::-webkit-scrollbar-button {
    display: none;
    height: 0;
    width: 0;
    appearance: none;
  }

  /* Custom Scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-thumb {
    background: rgb(167, 139, 250);
    border-radius: 10px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: rgb(139, 92, 246);
  }

  .dark ::-webkit-scrollbar-thumb {
    background: rgb(167, 139, 250);
  }

  .dark ::-webkit-scrollbar-thumb:hover {
    background: rgb(139, 92, 246);
  }

  /* Halloween mode scrollbar - Teal theme */
  html.halloween ::-webkit-scrollbar-thumb {
    background: rgb(96, 201, 182);
    border-radius: 10px;
  }

  html.halloween ::-webkit-scrollbar-thumb:hover {
    background: rgb(72, 180, 162);
  }

  ::-webkit-scrollbar-track {
    background: rgba(167, 139, 250, 0.15);
  }

  .dark ::-webkit-scrollbar-track {
    background: rgba(167, 139, 250, 0.15);
  }

  /* Light mode scrollbar */
  :root:not(.dark) ::-webkit-scrollbar-track {
    background: rgba(167, 139, 250, 0.1);
  }

  /* Halloween mode scrollbar track - Teal theme */
  html.halloween ::-webkit-scrollbar-track {
    background: rgba(96, 201, 182, 0.15);
  }

  :root:not(.dark) ::-webkit-scrollbar-thumb {
    background: #d1d5db;
    border-radius: 4px;
    border: 2px solid #ffffff;
  }

  :root:not(.dark) ::-webkit-scrollbar-thumb:hover {
    background: #9ca3af;
  }

  :root:not(.dark) * {
    scrollbar-color: #d1d5db #ffffff;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    transition: background-image 0.5s ease-in-out;
  }

  /* Halloween mode background - only for authenticated pages with Layout */
  html.halloween .halloween-bg-container {
    position: relative;
    background-color: #000000;
  }

  /* Blurred background layer */
  html.halloween .halloween-bg-container::after {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #000000;
    background-image: var(--halloween-bg);
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    background-repeat: no-repeat;
    filter: blur(4px) brightness(0.7);
    z-index: -2;
    animation: halloweenFadeIn 0.8s ease-out;
  }

  /* Dark overlay */
  html.halloween .halloween-bg-container::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    pointer-events: none;
    z-index: -1;
    animation: halloweenFadeIn 0.8s ease-out;
  }

  @keyframes halloweenFadeIn {
    from {
      clip-path: circle(0% at 100% 0%);
    }
    to {
      clip-path: circle(150% at 100% 0%);
    }
  }

  /* Halloween Selection Style */
  html.halloween ::selection {
    background-color: rgba(96, 201, 182, 0.3);
    color: #60c9b6;
  }
}

/* Custom Sonner Toast Styling */
@layer components {
  /* Light theme toaster */
  :root:not(.dark) [data-sonner-toaster] {
    --normal-bg: #ffffff;
    --normal-border: #9333ea;
    --normal-text: #000000;
  }

  [data-sonner-toast] {
    backdrop-filter: blur(12px) !important;
    border-radius: 12px !important;
    padding: 16px !important;
    min-height: 60px;
    animation: slideIn 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  }

  /* Light theme toast styling */
  :root:not(.dark) [data-sonner-toast] {
    background: #ffffff !important;
    border: 1px solid #9333ea !important;
    color: #000000 !important;
    box-shadow:
      0 20px 25px -5px rgba(0, 0, 0, 0.1),
      0 10px 10px -5px rgba(0, 0, 0, 0.05);
  }

  /* All toast types use purple border */
  [data-sonner-toast][data-type="success"],
  [data-sonner-toast][data-type="error"],
  [data-sonner-toast][data-type="warning"],
  [data-sonner-toast][data-type="info"] {
    border: 1px solid #9333ea !important;
  }

  /* Light theme text styling */
  :root:not(.dark) [data-sonner-toast] [data-title] {
    font-weight: 600;
    font-size: 14px;
    line-height: 1.4;
    color: #000000 !important;
  }

  :root:not(.dark) [data-sonner-toast] [data-description] {
    font-size: 13px;
    line-height: 1.4;
    color: #6b7280 !important;
    margin-top: 4px;
  }

  /* Button styling */
  [data-sonner-toast] [data-button] {
    border-radius: 8px;
    font-size: 12px;
    font-weight: 500;
    padding: 6px 12px;
    transition: all 0.2s ease;
  }

  /* Light theme buttons */
  :root:not(.dark) [data-sonner-toast] [data-cancel-button] {
    background: #f3f4f6 !important;
    border: 1px solid #d1d5db !important;
    color: #374151 !important;
  }

  :root:not(.dark) [data-sonner-toast] [data-cancel-button]:hover {
    background: #e5e7eb !important;
    color: #111827 !important;
  }

  @keyframes slideIn {
    from {
      transform: translateX(100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  /* Halloween Toast Styles */
  html.halloween [data-sonner-toast] {
    background: rgba(20, 20, 25, 0.85) !important;
    border: 1px solid #60c9b6 !important;
    box-shadow:
      0 0 20px rgba(96, 201, 182, 0.3),
      0 20px 25px -5px rgba(0, 0, 0, 0.3),
      0 10px 10px -5px rgba(0, 0, 0, 0.2) !important;
  }

  html.halloween [data-sonner-toast][data-type="success"] {
    border-color: #60c9b6 !important;
  }

  html.halloween [data-sonner-toast][data-type="error"] {
    border-color: #ef4444 !important;
    box-shadow:
      0 0 15px rgba(239, 68, 68, 0.3),
      0 20px 25px -5px rgba(0, 0, 0, 0.3) !important;
  }

  html.halloween [data-sonner-toast][data-type="warning"] {
    border-color: #f59e0b !important;
    box-shadow:
      0 0 15px rgba(245, 158, 11, 0.3),
      0 20px 25px -5px rgba(0, 0, 0, 0.3) !important;
  }

  html.halloween [data-sonner-toast][data-type="info"] {
    border-color: #60c9b6 !important;
  }

  html.halloween [data-sonner-toast] [data-title] {
    color: #60c9b6 !important;
  }

  html.halloween [data-sonner-toast] [data-description] {
    color: #b4b4b8 !important;
  }

  html.halloween [data-sonner-toast] [data-cancel-button] {
    background: rgba(96, 201, 182, 0.1) !important;
    border: 1px solid rgba(96, 201, 182, 0.3) !important;
    color: #60c9b6 !important;
  }

  html.halloween [data-sonner-toast] [data-cancel-button]:hover {
    background: rgba(96, 201, 182, 0.2) !important;
  }
}

/* Lexical styles moved to src/components/notes/lexical/lexical-editor.css */
/* All Lexical styles moved to src/components/notes/lexical/lexical-editor.css */
/* Mobile-specific improvements for Notes page */
@layer utilities {
  .touch-manipulation {
    touch-action: manipulation;
  }

  /* Improve mobile tap targets */
  @media (max-width: 1024px) {
    .mobile-tap-target {
      min-height: 44px;
      min-width: 44px;
    }
  }

  /* Mobile sidebar improvements */
  @media (max-width: 1024px) {
    .mobile-sidebar {
      width: 280px;
      max-width: 80vw;
    }
  }
}
/* Enhanced list view responsiveness */
@layer utilities {
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Mobile-optimized list items */
  @media (max-width: 640px) {
    .mobile-list-item {
      min-height: 80px;
      padding: 16px;
    }

    .mobile-list-content {
      line-height: 1.4;
    }
  }

  /* Tablet optimizations */
  @media (min-width: 641px) and (max-width: 1024px) {
    .tablet-list-spacing {
      padding: 12px 16px;
    }
  }

  /* Hide scrollbars on mobile screens */
  @media (max-width: 768px) {
    .mobile-scrollbar-hide::-webkit-scrollbar {
      display: none;
    }
    .mobile-scrollbar-hide {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
  }
}
